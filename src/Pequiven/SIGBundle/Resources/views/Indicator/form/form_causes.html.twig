{% extends 'PequivenSEIPBundle:Template:Developer/Common/formLayoutSIG.html.twig' %}

{% block body %}
{% trans_default_domain 'PequivenIndicatorBundle' %}  	
<form method="POST" id="form_causes_evolution">
	<fieldset class="fieldset fields-list">
            <legend class="legend">{{ 'sig.causes_deviation'|trans ({}, 'messages') }}</legend>	
                {% include 'PequivenSIGBundle:Template:set_month.html.twig' %} 	
                <div class="field-block button-height" >
                    {{ form_label(form.causes) }}
                    {{ form_widget(form.causes) }}
                </div>

                <div class="field-block button-height" >
                    {{ form_label(form.valueOfcauses) }}
                    {{ form_widget(form.valueOfcauses) }}
                </div>
        {{ form_rest(form) }}
        <p id="max" style="display:none">{{ sumCause }}</p>
   <br>
   </fieldset>
</form>     
<script type="text/javascript">
$('input#evolutioncause_valueOfcauses').keyup(function openConfirm() {        
    var valueCharge = $("#max").text();                
    var max = 100 - valueCharge;

    if ($("#evolutioncause_valueOfcauses").val() > max) {
        $.modal.alert('Valor ingresado mayor a avance valido para carga ' + max, {
            buttons: {
                'Aceptar': {
                    classes:    'huge blue-gradient glossy full-width',
                    click:      function(win) { win.closeModal(); 
                        $("#evolutioncause_valueOfcauses").val("")
                    }
                }
            }
        });            
    };
});    
</script>
{% endblock %}